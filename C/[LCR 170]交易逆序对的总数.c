//åœ¨è‚¡ç¥¨äº¤æ˜“ä¸­ï¼Œå¦‚æœå‰ä¸€å¤©çš„è‚¡ä»·é«˜äºåä¸€å¤©çš„è‚¡ä»·ï¼Œåˆ™å¯ä»¥è®¤ä¸ºå­˜åœ¨ä¸€ä¸ªã€Œäº¤æ˜“é€†åºå¯¹ã€ã€‚è¯·è®¾è®¡ä¸€ä¸ªç¨‹åºï¼Œè¾“å…¥ä¸€æ®µæ—¶é—´å†…çš„è‚¡ç¥¨äº¤æ˜“è®°å½• recordï¼Œè¿”å›å…¶ä¸­å­˜åœ¨çš„
//ã€Œäº¤æ˜“é€†åºå¯¹ã€æ€»æ•°ã€‚ 
//
// 
//
// ç¤ºä¾‹ 1ï¼š 
//
// 
//è¾“å…¥ï¼šrecord = [9, 7, 5, 4, 6]
//è¾“å‡ºï¼š8
//è§£é‡Šï¼šäº¤æ˜“ä¸­çš„é€†åºå¯¹ä¸º (9, 7), (9, 5), (9, 4), (9, 6), (7, 5), (7, 4), (7, 6), (5, 4)ã€‚
// 
//
// 
//
// æç¤ºï¼š 
//
// 0 <= record.length <= 50000 
//
// Related Topics æ ‘çŠ¶æ•°ç»„ çº¿æ®µæ ‘ æ•°ç»„ äºŒåˆ†æŸ¥æ‰¾ åˆ†æ²» æœ‰åºé›†åˆ å½’å¹¶æ’åº ğŸ‘ 1125 ğŸ‘ 0


//leetcode submit region begin(Prohibit modification and deletion)
int mergeSort(int l, int r, int *nums, int *tmp)
{
    if (l >= r)
        return 0;
    // é€’å½’åˆ’åˆ†è‡³å•
    int m = (l + r) / 2;
    int res = mergeSort(l, m, nums, tmp) + mergeSort(m + 1, r, nums, tmp);
    // å¼€å§‹é€æ¸åˆå¹¶
    int i = l, j = m + 1;
    for (int k = l; k <= r; k++) // æ³¨æ„kçš„è¾¹ç•Œ <=
    {
        tmp[k] = nums[k];
    }
    for (int k = l; k <= r; k++) // æ³¨æ„kçš„è¾¹ç•Œ <=
    {
        if (i == m + 1)	//å·¦å­æ•°ç»„åˆå¹¶ç»“æŸæ—¶ï¼Œiç”±ä¸‹æ–¹çš„i++æ¥è‡ªå¢åˆ¤æ–­
        { //å°†å³è¾¹å‰©ä½™å…ƒç´ åŠ å…¥æ•°ç»„
            nums[k] = tmp[j++];
        }
        else if (j == r + 1 || tmp[i] <= tmp[j])//å³è¾¹æ•°ç»„åˆå¹¶ç»“æŸæ—¶æˆ–å³è¾¹>å·¦è¾¹
        { //å°†å…ƒç´ åŠ å…¥ç»“æœæ•°ç»„
            nums[k] = tmp[i++];
        }
        else
        { //å·¦è¾¹å…ƒç´ >å³è¾¹å…ƒç´ ï¼Œæ­¤æ—¶å°†è´¡çŒ®é€†åºå¯¹
            nums[k] = tmp[j++];
            res += m - i + 1;
            //æ¯ä¸ªå·¦å­æ•°ç»„ä¸­çš„å‰©ä½™å…ƒç´ ä¸åˆšåˆšä»å³å­æ•°ç»„ä¸­å–å‡ºçš„å…ƒç´ éƒ½æ„æˆä¸€ä¸ªé€†åºå¯¹,é€†åºå¯¹çš„æ•°é‡å°±æ˜¯å·¦å­æ•°ç»„å‰©ä½™å…ƒç´ çš„æ•°é‡ï¼Œå³m-i+1ã€‚
        }
    }
    return res;
}
int reversePairs(int *nums, int numsSize)
{
	int *tmp = (int*)malloc(sizeof(int) * numsSize);
    return mergeSort(0, numsSize - 1,nums,tmp);
}
//leetcode submit region end(Prohibit modification and deletion)